<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Matthew Robinson">

<title>ds4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="ds4_files/libs/clipboard/clipboard.min.js"></script>
<script src="ds4_files/libs/quarto-html/quarto.js"></script>
<script src="ds4_files/libs/quarto-html/popper.min.js"></script>
<script src="ds4_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ds4_files/libs/quarto-html/anchor.min.js"></script>
<link href="ds4_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ds4_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ds4_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ds4_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ds4_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ds4</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Matthew Robinson </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ lubridate 1.9.3     ✔ tibble    3.2.1
✔ purrr     1.0.2     ✔ tidyr     1.3.1
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggstance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'ggstance'

The following objects are masked from 'package:ggplot2':

    geom_errorbarh, GeomErrorbarh</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lvplot)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggbeeswarm)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'maps'

The following object is masked from 'package:purrr':

    map</code></pre>
</div>
</div>
<section id="section-10.5" class="level1">
<h1>Section 10.5</h1>
</section>
<section id="exercise-1" class="level1">
<h1>Exercise 1</h1>
<p>How can you tell if an object is a tibble?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>flights</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1      517            515         2      830            819
 2  2013     1     1      533            529         4      850            830
 3  2013     1     1      542            540         2      923            850
 4  2013     1     1      544            545        -1     1004           1022
 5  2013     1     1      554            600        -6      812            837
 6  2013     1     1      554            558        -4      740            728
 7  2013     1     1      555            600        -5      913            854
 8  2013     1     1      557            600        -3      709            723
 9  2013     1     1      557            600        -3      838            846
10  2013     1     1      558            600        -2      753            745
# ℹ 336,766 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p>As seen above, a tibble will say that it is a tibble at the top when it is printed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mtcars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
</div>
</div>
<p>You can tell this is not a tibble because it does not say it is a tibble.</p>
</section>
<section id="exercise-2" class="level1">
<h1>Exercise 2</h1>
<p>Compare and contrast the following operations on a data.frame and equivalent tibble. What is different? Why might the default data frame behaviours cause you frustration?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">abc =</span> <span class="dv">1</span>, <span class="at">xyz =</span> <span class="st">"a"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="st">"xyz"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="fu">c</span>(<span class="st">"abc"</span>, <span class="st">"xyz"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  abc xyz
1   1   a</code></pre>
</div>
</div>
<p>These operations are performed on a data frame. The first operation incorrectly returns something despite there being no column named x. The second operation returns the correct data but does not specify what row and column it is in. The third operation returns the correct data but does not specify what data type each column is.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">abc =</span> <span class="dv">1</span>, <span class="at">xyz =</span> <span class="st">"a"</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `x`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="st">"xyz"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  xyz  
  &lt;chr&gt;
1 a    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="fu">c</span>(<span class="st">"abc"</span>, <span class="st">"xyz"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
    abc xyz  
  &lt;dbl&gt; &lt;chr&gt;
1     1 a    </code></pre>
</div>
</div>
<p>These operations are performed on a tibble. The first operation correctly points out that there is no column named x. The second operation returns the correct data with the relevant information. The third operation also returns the correct data with the relevant information.</p>
</section>
<section id="exercise-5" class="level1">
<h1>Exercise 5</h1>
<p>What does tibble::enframe() do? When might you use it?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">enframe</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
   name value
  &lt;int&gt; &lt;int&gt;
1     1     1
2     2     2
3     3     3
4     4     4
5     5     5</code></pre>
</div>
</div>
<p>The enframe command converts a vector into a tibble. This can be used if you have data in a vector which you want in a tibble.</p>
</section>
<section id="exercise-6" class="level1">
<h1>Exercise 6</h1>
<p>What option controls how many additional column names are printed at the footer of a tibble?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>flights</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1      517            515         2      830            819
 2  2013     1     1      533            529         4      850            830
 3  2013     1     1      542            540         2      923            850
 4  2013     1     1      544            545        -1     1004           1022
 5  2013     1     1      554            600        -6      812            837
 6  2013     1     1      554            558        -4      740            728
 7  2013     1     1      555            600        -5      913            854
 8  2013     1     1      557            600        -3      709            723
 9  2013     1     1      557            600        -3      838            846
10  2013     1     1      558            600        -2      753            745
# ℹ 336,766 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p>By default, the flights tibble lists 11 columns in the footer which do not appear in the table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1      517            515         2      830            819
 2  2013     1     1      533            529         4      850            830
 3  2013     1     1      542            540         2      923            850
 4  2013     1     1      544            545        -1     1004           1022
 5  2013     1     1      554            600        -6      812            837
 6  2013     1     1      554            558        -4      740            728
 7  2013     1     1      555            600        -5      913            854
 8  2013     1     1      557            600        -3      709            723
 9  2013     1     1      557            600        -3      838            846
10  2013     1     1      558            600        -2      753            745
   arr_delay carrier flight tailnum origin dest  air_time distance  hour minute
       &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1        11 UA        1545 N14228  EWR    IAH        227     1400     5     15
 2        20 UA        1714 N24211  LGA    IAH        227     1416     5     29
 3        33 AA        1141 N619AA  JFK    MIA        160     1089     5     40
 4       -18 B6         725 N804JB  JFK    BQN        183     1576     5     45
 5       -25 DL         461 N668DN  LGA    ATL        116      762     6      0
 6        12 UA        1696 N39463  EWR    ORD        150      719     5     58
 7        19 B6         507 N516JB  EWR    FLL        158     1065     6      0
 8       -14 EV        5708 N829AS  LGA    IAD         53      229     6      0
 9        -8 B6          79 N593JB  JFK    MCO        140      944     6      0
10         8 AA         301 N3ALAA  LGA    ORD        138      733     6      0
   time_hour          
   &lt;dttm&gt;             
 1 2013-01-01 05:00:00
 2 2013-01-01 05:00:00
 3 2013-01-01 05:00:00
 4 2013-01-01 05:00:00
 5 2013-01-01 06:00:00
 6 2013-01-01 05:00:00
 7 2013-01-01 06:00:00
 8 2013-01-01 06:00:00
 9 2013-01-01 06:00:00
10 2013-01-01 06:00:00
# ℹ 336,766 more rows</code></pre>
</div>
</div>
<p>Changing the width parameter changes how many columns are included in the table and, by extension, how many columns are listed in the footer.</p>
</section>
<section id="section-12.2.1" class="level1">
<h1>Section 12.2.1</h1>
</section>
<section id="exercise-1-1" class="level1">
<h1>Exercise 1</h1>
<p>Using prose, describe how the variables and observations are organised in each of the sample tables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>table1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year  cases population
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
<p>Table 1 is the tidy table. Each variable, including country, year, cases, and population, has its own column. Each observation, which is a combination of a country and year, has its own row. Therefore, each value has its own cell.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>table2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
<p>Table 2 is not tidy. Cases and population form different rows for each combination of a country and year when they should be two separate columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
<p>Table 3 is not tidy. The rate column includes both cases and population when they should be in separate columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>table4b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country         `1999`     `2000`
  &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan   19987071   20595360
2 Brazil       172006362  174504898
3 China       1272915272 1280428583</code></pre>
</div>
</div>
<p>These tables are not tidy. Table 4a only includes cases while table 4b only includes population when they should be combined into one table.</p>
</section>
<section id="section-12.3.3" class="level1">
<h1>Section 12.3.3</h1>
</section>
<section id="exercise-2-1" class="level1">
<h1>Exercise 2</h1>
<p>Why does this code fail?<br>
</p>
<p>table4a %&gt;% pivot_longer(c(1999, 2000), names_to = “year”, values_to = “cases”)<br>
#&gt; Error in <code>pivot_longer()</code>:<br>
#&gt; ! Can’t subset columns past the end.<br>
#&gt; ℹ Locations 1999 and 2000 don’t exist.<br>
#&gt; ℹ There are only 3 columns.<br>
</p>
<p>This code fails because 1999 and 2000 are considered characters instead of integers in the table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>table4a <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>), <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
<p>Putting quotation marks around 1999 and 2000 fixes the issue.</p>
</section>
<section id="section-12.4.3" class="level1">
<h1>Section 12.4.3</h1>
</section>
<section id="exercise-1-2" class="level1">
<h1>Exercise 1</h1>
<p>What do the extra and fill arguments do in separate()? Experiment with the various options for the following two toy datasets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e,f,g"</span>, <span class="st">"h,i,j"</span>)) <span class="sc">%&gt;%</span> <span class="fu">separate</span>(x, <span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 3 pieces. Additional pieces discarded in 1 rows [2].</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  one   two   three
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 a     b     c    
2 d     e     f    
3 h     i     j    </code></pre>
</div>
</div>
<p>This function gives a warning because the second row includes four elements instead of three. Therefore, the last element of that row is dropped.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e,f,g"</span>, <span class="st">"h,i,j"</span>)) <span class="sc">%&gt;%</span> <span class="fu">separate</span>(x, <span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>), <span class="at">extra =</span> <span class="st">"drop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  one   two   three
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 a     b     c    
2 d     e     f    
3 h     i     j    </code></pre>
</div>
</div>
<p>Setting extra to “drop” gives the same results as the default settings. However, it removes the warning.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e,f,g"</span>, <span class="st">"h,i,j"</span>)) <span class="sc">%&gt;%</span> <span class="fu">separate</span>(x, <span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>), <span class="at">extra =</span> <span class="st">"merge"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  one   two   three
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 a     b     c    
2 d     e     f,g  
3 h     i     j    </code></pre>
</div>
</div>
<p>Setting extra to “merge” puts the last two elements in the second row in the same column. This results in f and g sharing a cell.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e"</span>, <span class="st">"f,g,i"</span>)) <span class="sc">%&gt;%</span> <span class="fu">separate</span>(x, <span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 3 pieces. Missing pieces filled with `NA` in 1 rows [2].</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  one   two   three
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 a     b     c    
2 d     e     &lt;NA&gt; 
3 f     g     i    </code></pre>
</div>
</div>
<p>This function gives a warning because the second row includes two elements instead of three. Therefore, the last element of that row is listed as NA.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e"</span>, <span class="st">"f,g,i"</span>)) <span class="sc">%&gt;%</span> <span class="fu">separate</span>(x, <span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>), <span class="at">fill =</span> <span class="st">"right"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  one   two   three
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 a     b     c    
2 d     e     &lt;NA&gt; 
3 f     g     i    </code></pre>
</div>
</div>
<p>Setting fill to “right” gives the same results as the default settings. However, it removes the warning.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">"a,b,c"</span>, <span class="st">"d,e"</span>, <span class="st">"f,g,i"</span>)) <span class="sc">%&gt;%</span> <span class="fu">separate</span>(x, <span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>), <span class="at">fill =</span> <span class="st">"left"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  one   two   three
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 a     b     c    
2 &lt;NA&gt;  d     e    
3 f     g     i    </code></pre>
</div>
</div>
<p>Setting fill to “left” skips the first element in the second row instead of the last one. This results in the element of that row being listed as NA.</p>
</section>
<section id="section-12.6.1" class="level1">
<h1>Section 12.6.1</h1>
</section>
<section id="exercise-2-2" class="level1">
<h1>Exercise 2</h1>
<p>What happens if you neglect the mutate() step? (mutate(names_from = stringr::str_replace(key, “newrel”, “new_rel”)))</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>who <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> new_sp_m014<span class="sc">:</span>newrel_f65, <span class="at">names_to =</span> <span class="st">"key"</span>, <span class="at">values_to =</span> <span class="st">"cases"</span>, <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">separate</span>(key, <span class="fu">c</span>(<span class="st">"new"</span>, <span class="st">"var"</span>, <span class="st">"sexage"</span>)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>new, <span class="sc">-</span>iso2, <span class="sc">-</span>iso3) <span class="sc">%&gt;%</span> <span class="fu">separate</span>(sexage, <span class="fu">c</span>(<span class="st">"sex"</span>, <span class="st">"age"</span>), <span class="at">sep =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 3 pieces. Missing pieces filled with `NA` in 2580 rows [243, 244, 679,
680, 681, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 903, 904, 905,
906, ...].</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 76,046 × 6
   country      year var   sex   age   cases
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;
 1 Afghanistan  1997 sp    m     014       0
 2 Afghanistan  1997 sp    m     1524     10
 3 Afghanistan  1997 sp    m     2534      6
 4 Afghanistan  1997 sp    m     3544      3
 5 Afghanistan  1997 sp    m     4554      5
 6 Afghanistan  1997 sp    m     5564      2
 7 Afghanistan  1997 sp    m     65        0
 8 Afghanistan  1997 sp    f     014       5
 9 Afghanistan  1997 sp    f     1524     38
10 Afghanistan  1997 sp    f     2534     36
# ℹ 76,036 more rows</code></pre>
</div>
</div>
<p>Removing the mutate function gives a warning that several pieces are missing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>who <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> new_sp_m014<span class="sc">:</span>newrel_f65, <span class="at">names_to =</span> <span class="st">"key"</span>, <span class="at">values_to =</span> <span class="st">"cases"</span>, <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">key =</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(key, <span class="st">"newrel"</span>, <span class="st">"new_rel"</span>)) <span class="sc">%&gt;%</span> <span class="fu">separate</span>(key, <span class="fu">c</span>(<span class="st">"new"</span>, <span class="st">"var"</span>, <span class="st">"sexage"</span>)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>new, <span class="sc">-</span>iso2, <span class="sc">-</span>iso3) <span class="sc">%&gt;%</span> <span class="fu">separate</span>(sexage, <span class="fu">c</span>(<span class="st">"sex"</span>, <span class="st">"age"</span>), <span class="at">sep =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 76,046 × 6
   country      year var   sex   age   cases
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;
 1 Afghanistan  1997 sp    m     014       0
 2 Afghanistan  1997 sp    m     1524     10
 3 Afghanistan  1997 sp    m     2534      6
 4 Afghanistan  1997 sp    m     3544      3
 5 Afghanistan  1997 sp    m     4554      5
 6 Afghanistan  1997 sp    m     5564      2
 7 Afghanistan  1997 sp    m     65        0
 8 Afghanistan  1997 sp    f     014       5
 9 Afghanistan  1997 sp    f     1524     38
10 Afghanistan  1997 sp    f     2534     36
# ℹ 76,036 more rows</code></pre>
</div>
</div>
<p>Adding the mutate function back in removes this warning.</p>
</section>
<section id="section-13.4.6" class="level1">
<h1>Section 13.4.6</h1>
</section>
<section id="exercise-2-3" class="level1">
<h1>Exercise 2</h1>
<p>Add the location of the origin and destination (i.e.&nbsp;the lat and lon) to flights.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(airports, <span class="fu">c</span>(<span class="st">"origin"</span> <span class="ot">=</span> <span class="st">"faa"</span>)) <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(airports, <span class="fu">c</span>(<span class="st">"dest"</span> <span class="ot">=</span> <span class="st">"faa"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 33
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1      517            515         2      830            819
 2  2013     1     1      533            529         4      850            830
 3  2013     1     1      542            540         2      923            850
 4  2013     1     1      544            545        -1     1004           1022
 5  2013     1     1      554            600        -6      812            837
 6  2013     1     1      554            558        -4      740            728
 7  2013     1     1      555            600        -5      913            854
 8  2013     1     1      557            600        -3      709            723
 9  2013     1     1      557            600        -3      838            846
10  2013     1     1      558            600        -2      753            745
# ℹ 336,766 more rows
# ℹ 25 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, name.x &lt;chr&gt;, lat.x &lt;dbl&gt;,
#   lon.x &lt;dbl&gt;, alt.x &lt;dbl&gt;, tz.x &lt;dbl&gt;, dst.x &lt;chr&gt;, tzone.x &lt;chr&gt;,
#   name.y &lt;chr&gt;, lat.y &lt;dbl&gt;, lon.y &lt;dbl&gt;, alt.y &lt;dbl&gt;, tz.y &lt;dbl&gt;,
#   dst.y &lt;chr&gt;, tzone.y &lt;chr&gt;</code></pre>
</div>
</div>
<p>Using two left joins to map both “origin” and “dest” to “faa” adds the location of both origin and destination to flights.</p>
</section>
<section id="section-15.4.1" class="level1">
<h1>Section 15.4.1</h1>
</section>
<section id="exercise-1-3" class="level1">
<h1>Exercise 1</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(gss_cat, <span class="fu">desc</span>(tvhours))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,483 × 9
    year marital         age race  rincome        partyid    relig denom tvhours
   &lt;int&gt; &lt;fct&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;          &lt;fct&gt;      &lt;fct&gt; &lt;fct&gt;   &lt;int&gt;
 1  2000 Never married    30 Black Not applicable Independe… Prot… Bapt…      24
 2  2000 Separated        45 Black Not applicable Ind,near … Prot… Other      24
 3  2002 Never married    33 White $6000 to 6999  Independe… Cath… Not …      24
 4  2006 Divorced         53 Black Not applicable Strong de… Prot… Sout…      24
 5  2008 Divorced         50 Black No answer      Ind,near … Prot… Bapt…      24
 6  2008 Never married    44 White Not applicable Independe… Prot… Other      24
 7  2008 Never married    21 White Don't know     Independe… Cath… Not …      24
 8  2008 Widowed          71 White Not applicable Strong de… Prot… Don'…      24
 9  2010 Widowed          62 Black Not applicable Strong de… Prot… Am b…      24
10  2010 Widowed          52 Black Refused        Strong de… Prot… Bapt…      24
# ℹ 21,473 more rows</code></pre>
</div>
</div>
<p>Several people said they watch television 24 hours a day which is clearly not realistic. It would probably be better to use median instead of mean because median mostly ignores these unrealistic numbers.</p>
</section>
<section id="section-15.5.1" class="level1">
<h1>Section 15.5.1</h1>
</section>
<section id="exercise-2-4" class="level1">
<h1>Exercise 2</h1>
<p>How could you collapse rincome into a small set of categories?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> gss_cat) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> rincome))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ds4_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The categories “Not applicable”, “Refused”, “Don’t know”, and “No answer” all basically mean not applicable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> gss_cat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">rincome =</span> <span class="fu">fct_collapse</span>(rincome, <span class="at">na =</span> <span class="fu">c</span>(<span class="st">"Not applicable"</span>, <span class="st">"Refused"</span>, <span class="st">"Don't know"</span>, <span class="st">"No answer"</span>)))) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> rincome))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ds4_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Combining these four categories into one category named “na” makes the data more tidy.</p>
</section>
<section id="section-16.3.4" class="level1">
<h1>Section 16.3.4</h1>
</section>
<section id="exercise-5-1" class="level1">
<h1>Exercise 5</h1>
<p>On what day of the week should you leave if you want to minimise the chance of a delay?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>make_datetime_100 <span class="ot">&lt;-</span> <span class="cf">function</span>(year, month, day, time) {<span class="fu">make_datetime</span>(year, month, day, time <span class="sc">%/%</span> <span class="dv">100</span>, time <span class="sc">%%</span> <span class="dv">100</span>)}</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>flights_dt <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_time), <span class="sc">!</span><span class="fu">is.na</span>(arr_time)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">dep_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, dep_time), <span class="at">arr_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, arr_time), <span class="at">sched_dep_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, sched_dep_time), <span class="at">sched_arr_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, sched_arr_time)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(origin, dest, <span class="fu">ends_with</span>(<span class="st">"delay"</span>), <span class="fu">ends_with</span>(<span class="st">"time"</span>))</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights_dt, dep_delay <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">wday =</span> <span class="fu">wday</span>(dep_time, <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> wday)) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ds4_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>If you want to avoid delays, you should leave on Saturday because it has the least amount of delays.</p>
</section>
<section id="section-16.4.5" class="level1">
<h1>Section 16.4.5</h1>
</section>
<section id="exercise-1-4" class="level1">
<h1>Exercise 1</h1>
<p>Why is there months() but no dmonths()?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dseconds</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1s"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dminutes</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "60s (~1 minutes)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dhours</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "3600s (~1 hours)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ddays</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "86400s (~1 days)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dweeks</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "604800s (~1 weeks)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dyears</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "31557600s (~1 years)"</code></pre>
</div>
</div>
<p>Unlike seconds, minutes, hours, days, weeks, and years, months do not have a set length. A month could be anywhere from 28 to 31 days.</p>
</section>
<section id="exercise-2-5" class="level1">
<h1>Exercise 2</h1>
<p>Explain days(overnight * 1) to someone who has just started learning R. How does it work?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>flights_dt <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">overnight =</span> arr_time <span class="sc">&lt;</span> dep_time, <span class="at">arr_time =</span> arr_time <span class="sc">+</span> <span class="fu">days</span>(overnight <span class="sc">*</span> <span class="dv">1</span>), <span class="at">sched_arr_time =</span> sched_arr_time <span class="sc">+</span> <span class="fu">days</span>(overnight <span class="sc">*</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 328,063 × 10
   origin dest  dep_delay arr_delay dep_time            sched_dep_time     
   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dttm&gt;              &lt;dttm&gt;             
 1 EWR    IAH           2        11 2013-01-01 05:17:00 2013-01-01 05:15:00
 2 LGA    IAH           4        20 2013-01-01 05:33:00 2013-01-01 05:29:00
 3 JFK    MIA           2        33 2013-01-01 05:42:00 2013-01-01 05:40:00
 4 JFK    BQN          -1       -18 2013-01-01 05:44:00 2013-01-01 05:45:00
 5 LGA    ATL          -6       -25 2013-01-01 05:54:00 2013-01-01 06:00:00
 6 EWR    ORD          -4        12 2013-01-01 05:54:00 2013-01-01 05:58:00
 7 EWR    FLL          -5        19 2013-01-01 05:55:00 2013-01-01 06:00:00
 8 LGA    IAD          -3       -14 2013-01-01 05:57:00 2013-01-01 06:00:00
 9 JFK    MCO          -3        -8 2013-01-01 05:57:00 2013-01-01 06:00:00
10 LGA    ORD          -2         8 2013-01-01 05:58:00 2013-01-01 06:00:00
# ℹ 328,053 more rows
# ℹ 4 more variables: arr_time &lt;dttm&gt;, sched_arr_time &lt;dttm&gt;, air_time &lt;dbl&gt;,
#   overnight &lt;lgl&gt;</code></pre>
</div>
</div>
<p>The overnight variable will equal 1 if it is an overnight flight and 0 if it is not an overnight flight. Therefore, the “days(overnight * 1)” command will return 1 if it is an overnight flight and 0 if it is not an overnight flight. This ensures that a day is added only to overnight flights.</p>
</section>
<section id="exercise-4" class="level1">
<h1>Exercise 4</h1>
<p>Write a function that given your birthday (as a date), returns how old you are in years.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.duration</span>((<span class="fu">today</span>() <span class="sc">-</span> <span class="fu">dmy</span>(<span class="dv">08052002</span>))) <span class="sc">%/%</span> <span class="fu">dyears</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22</code></pre>
</div>
</div>
<p>This function correctly returns my age as 22.</p>
</section>
<section id="fbs-schools" class="level1">
<h1>FBS Schools</h1>
<p>This data set contains data on all NCAA Division 1 Football Bowl Subdivision (FBS) schools during the 2024 college football season. The data set was downloaded from collegefootballdata.com as a csv file. The read_csv function is used to transfer this data set into a data frame. The following table shows the first ten FBS schools alphabetically.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"fbs1.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 28
      Id School         Mascot        Abbreviation `Alt Name1`       `Alt Name2`
   &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;      
 1  2005 Air Force      Falcons       AFA          &lt;NA&gt;              AFA        
 2  2006 Akron          Zips          AKR          &lt;NA&gt;              AKR        
 3   333 Alabama        Crimson Tide  ALA          &lt;NA&gt;              ALA        
 4  2026 App State      Mountaineers  APP          Appalachian State APP        
 5    12 Arizona        Wildcats      ARIZ         &lt;NA&gt;              ARIZ       
 6     9 Arizona State  Sun Devils    ASU          &lt;NA&gt;              ASU        
 7     8 Arkansas       Razorbacks    ARK          &lt;NA&gt;              ARK        
 8  2032 Arkansas State Red Wolves    ARST         &lt;NA&gt;              ARST       
 9   349 Army           Black Knights ARMY         &lt;NA&gt;              ARMY       
10     2 Auburn         Tigers        AUB          &lt;NA&gt;              AUB        
   `Alt Name3` Conference        Division Color   `Alt Color`
   &lt;chr&gt;       &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;      
 1 Air Force   Mountain West     &lt;NA&gt;     #004a7b #ffffff    
 2 Akron       Mid-American      &lt;NA&gt;     #00285e #84754e    
 3 Alabama     SEC               &lt;NA&gt;     #9e1632 #ffffff    
 4 App State   Sun Belt          East     #ffcc00 #222222    
 5 Arizona     Big 12            &lt;NA&gt;     #0c234b #ab0520    
 6 Arizona St  Big 12            &lt;NA&gt;     #8e0c3a #ffc72c    
 7 Arkansas    SEC               &lt;NA&gt;     #a41f35 #ffffff    
 8 Arkansas St Sun Belt          West     #e81018 #000000    
 9 Army        American Athletic &lt;NA&gt;     #ce9c00 #231f20    
10 Auburn      SEC               &lt;NA&gt;     #002b5c #f26522    
   `Logos[0]`                                        
   &lt;chr&gt;                                             
 1 http://a.espncdn.com/i/teamlogos/ncaa/500/2005.png
 2 http://a.espncdn.com/i/teamlogos/ncaa/500/2006.png
 3 http://a.espncdn.com/i/teamlogos/ncaa/500/333.png 
 4 http://a.espncdn.com/i/teamlogos/ncaa/500/2026.png
 5 http://a.espncdn.com/i/teamlogos/ncaa/500/12.png  
 6 http://a.espncdn.com/i/teamlogos/ncaa/500/9.png   
 7 http://a.espncdn.com/i/teamlogos/ncaa/500/8.png   
 8 http://a.espncdn.com/i/teamlogos/ncaa/500/2032.png
 9 http://a.espncdn.com/i/teamlogos/ncaa/500/349.png 
10 http://a.espncdn.com/i/teamlogos/ncaa/500/2.png   
   `Logos[1]`                                              Twitter         
   &lt;chr&gt;                                                   &lt;chr&gt;           
 1 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2005.png @AF_Football    
 2 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2006.png @ZipsFB         
 3 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/333.png  @AlabamaFTBL    
 4 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2026.png @AppState_FB    
 5 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/12.png   @ArizonaFBall   
 6 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/9.png    @ASUFootball    
 7 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/8.png    @RazorbackFB    
 8 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2032.png @AStateFB       
 9 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/349.png  @ArmyWP_Football
10 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2.png    @AuburnFootball 
   `Location Venue Id` `Location Name`          `Location City` 
                 &lt;dbl&gt; &lt;chr&gt;                    &lt;chr&gt;           
 1                3713 Falcon Stadium           Colorado Springs
 2                3768 InfoCision Stadium       Akron           
 3                3657 Bryant-Denny Stadium     Tuscaloosa      
 4                3792 Kidd Brewer Stadium      Boone           
 5                3619 Arizona Stadium          Tucson          
 6                3947 Mountain America Stadium Tempe           
 7                3887 Razorback Stadium        Fayetteville    
 8                3625 Centennial Bank Stadium  Jonesboro       
 9                3841 Michie Stadium           West Point      
10                3785 Jordan-Hare Stadium      Auburn          
   `Location State` `Location Zip` `Location Country Code` `Location Timezone`
   &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;                   &lt;chr&gt;              
 1 CO                        80840 US                      America/Denver     
 2 OH                        44399 US                      America/New_York   
 3 AL                        35487 US                      America/Chicago    
 4 NC                        28608 US                      America/New_York   
 5 AZ                        85721 US                      America/Phoenix    
 6 AZ                        85287 US                      America/Phoenix    
 7 AR                        72702 US                      America/Chicago    
 8 AR                        72404 US                      America/Chicago    
 9 NY                        10996 US                      America/New_York   
10 AL                        36849 US                      America/Chicago    
   `Location Latitude` `Location Longitude` `Location Elevation`
                 &lt;dbl&gt;                &lt;dbl&gt;                &lt;dbl&gt;
 1                39.0               -105.                2025. 
 2                41.1                -81.5                321. 
 3                33.2                -87.6                 70.1
 4                36.2                -81.7                991. 
 5                32.2               -111.                 742. 
 6                33.4               -112.                 360. 
 7                36.1                -94.2                404. 
 8                35.8                -90.7                 89.5
 9                41.4                -74.0                 99.2
10                32.6                -85.5                201. 
   `Location Capacity` `Location Year Constructed` `Location Grass`
                 &lt;dbl&gt;                       &lt;dbl&gt; &lt;lgl&gt;           
 1               46692                        1962 FALSE           
 2               30000                        2009 FALSE           
 3              101821                        1929 TRUE            
 4               30000                        1962 FALSE           
 5               50782                        1928 FALSE           
 6               65870                        1958 TRUE            
 7               80000                        1938 FALSE           
 8               30382                        1974 FALSE           
 9               38000                        1924 FALSE           
10               87451                        1939 TRUE            
   `Location Dome`
   &lt;lgl&gt;          
 1 FALSE          
 2 FALSE          
 3 FALSE          
 4 FALSE          
 5 FALSE          
 6 FALSE          
 7 FALSE          
 8 FALSE          
 9 FALSE          
10 FALSE          
# ℹ 124 more rows</code></pre>
</div>
</div>
<p>When looking at this data, it is clear that it is not tidy. A few things will need to be done to tidy up this data. First of all, you will notice that each school has a unique ID. This ID ties each school into a larger database. Each school’s stadium also has a unique ID for the same purpose. Since we are only looking at this data set, it is safe to remove these two columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">select</span>(fbs, <span class="sc">-</span><span class="fu">c</span>(<span class="st">"Id"</span>, <span class="st">"Location Venue Id"</span>))</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 26
   School         Mascot        Abbreviation `Alt Name1`       `Alt Name2`
   &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;      
 1 Air Force      Falcons       AFA          &lt;NA&gt;              AFA        
 2 Akron          Zips          AKR          &lt;NA&gt;              AKR        
 3 Alabama        Crimson Tide  ALA          &lt;NA&gt;              ALA        
 4 App State      Mountaineers  APP          Appalachian State APP        
 5 Arizona        Wildcats      ARIZ         &lt;NA&gt;              ARIZ       
 6 Arizona State  Sun Devils    ASU          &lt;NA&gt;              ASU        
 7 Arkansas       Razorbacks    ARK          &lt;NA&gt;              ARK        
 8 Arkansas State Red Wolves    ARST         &lt;NA&gt;              ARST       
 9 Army           Black Knights ARMY         &lt;NA&gt;              ARMY       
10 Auburn         Tigers        AUB          &lt;NA&gt;              AUB        
   `Alt Name3` Conference        Division Color   `Alt Color`
   &lt;chr&gt;       &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;      
 1 Air Force   Mountain West     &lt;NA&gt;     #004a7b #ffffff    
 2 Akron       Mid-American      &lt;NA&gt;     #00285e #84754e    
 3 Alabama     SEC               &lt;NA&gt;     #9e1632 #ffffff    
 4 App State   Sun Belt          East     #ffcc00 #222222    
 5 Arizona     Big 12            &lt;NA&gt;     #0c234b #ab0520    
 6 Arizona St  Big 12            &lt;NA&gt;     #8e0c3a #ffc72c    
 7 Arkansas    SEC               &lt;NA&gt;     #a41f35 #ffffff    
 8 Arkansas St Sun Belt          West     #e81018 #000000    
 9 Army        American Athletic &lt;NA&gt;     #ce9c00 #231f20    
10 Auburn      SEC               &lt;NA&gt;     #002b5c #f26522    
   `Logos[0]`                                        
   &lt;chr&gt;                                             
 1 http://a.espncdn.com/i/teamlogos/ncaa/500/2005.png
 2 http://a.espncdn.com/i/teamlogos/ncaa/500/2006.png
 3 http://a.espncdn.com/i/teamlogos/ncaa/500/333.png 
 4 http://a.espncdn.com/i/teamlogos/ncaa/500/2026.png
 5 http://a.espncdn.com/i/teamlogos/ncaa/500/12.png  
 6 http://a.espncdn.com/i/teamlogos/ncaa/500/9.png   
 7 http://a.espncdn.com/i/teamlogos/ncaa/500/8.png   
 8 http://a.espncdn.com/i/teamlogos/ncaa/500/2032.png
 9 http://a.espncdn.com/i/teamlogos/ncaa/500/349.png 
10 http://a.espncdn.com/i/teamlogos/ncaa/500/2.png   
   `Logos[1]`                                              Twitter         
   &lt;chr&gt;                                                   &lt;chr&gt;           
 1 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2005.png @AF_Football    
 2 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2006.png @ZipsFB         
 3 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/333.png  @AlabamaFTBL    
 4 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2026.png @AppState_FB    
 5 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/12.png   @ArizonaFBall   
 6 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/9.png    @ASUFootball    
 7 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/8.png    @RazorbackFB    
 8 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2032.png @AStateFB       
 9 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/349.png  @ArmyWP_Football
10 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2.png    @AuburnFootball 
   `Location Name`          `Location City`  `Location State` `Location Zip`
   &lt;chr&gt;                    &lt;chr&gt;            &lt;chr&gt;                     &lt;dbl&gt;
 1 Falcon Stadium           Colorado Springs CO                        80840
 2 InfoCision Stadium       Akron            OH                        44399
 3 Bryant-Denny Stadium     Tuscaloosa       AL                        35487
 4 Kidd Brewer Stadium      Boone            NC                        28608
 5 Arizona Stadium          Tucson           AZ                        85721
 6 Mountain America Stadium Tempe            AZ                        85287
 7 Razorback Stadium        Fayetteville     AR                        72702
 8 Centennial Bank Stadium  Jonesboro        AR                        72404
 9 Michie Stadium           West Point       NY                        10996
10 Jordan-Hare Stadium      Auburn           AL                        36849
   `Location Country Code` `Location Timezone` `Location Latitude`
   &lt;chr&gt;                   &lt;chr&gt;                             &lt;dbl&gt;
 1 US                      America/Denver                     39.0
 2 US                      America/New_York                   41.1
 3 US                      America/Chicago                    33.2
 4 US                      America/New_York                   36.2
 5 US                      America/Phoenix                    32.2
 6 US                      America/Phoenix                    33.4
 7 US                      America/Chicago                    36.1
 8 US                      America/Chicago                    35.8
 9 US                      America/New_York                   41.4
10 US                      America/Chicago                    32.6
   `Location Longitude` `Location Elevation` `Location Capacity`
                  &lt;dbl&gt;                &lt;dbl&gt;               &lt;dbl&gt;
 1               -105.                2025.                46692
 2                -81.5                321.                30000
 3                -87.6                 70.1              101821
 4                -81.7                991.                30000
 5               -111.                 742.                50782
 6               -112.                 360.                65870
 7                -94.2                404.                80000
 8                -90.7                 89.5               30382
 9                -74.0                 99.2               38000
10                -85.5                201.                87451
   `Location Year Constructed` `Location Grass` `Location Dome`
                         &lt;dbl&gt; &lt;lgl&gt;            &lt;lgl&gt;          
 1                        1962 FALSE            FALSE          
 2                        2009 FALSE            FALSE          
 3                        1929 TRUE             FALSE          
 4                        1962 FALSE            FALSE          
 5                        1928 FALSE            FALSE          
 6                        1958 TRUE             FALSE          
 7                        1938 FALSE            FALSE          
 8                        1974 FALSE            FALSE          
 9                        1924 FALSE            FALSE          
10                        1939 TRUE             FALSE          
# ℹ 124 more rows</code></pre>
</div>
</div>
<p>Removing this unnecessary data is a good start, but there are still more columns which are not needed. As can be seen, there are three alternate name columns. Most of the cells in these columns are left empty, and most of the data that is in these columns is redundant anyway. Therefore, these columns can also be removed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">select</span>(fbs, <span class="sc">-</span><span class="fu">c</span>(<span class="st">"Alt Name1"</span>, <span class="st">"Alt Name2"</span>, <span class="st">"Alt Name3"</span>))</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 23
   School         Mascot        Abbreviation Conference        Division Color  
   &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;  
 1 Air Force      Falcons       AFA          Mountain West     &lt;NA&gt;     #004a7b
 2 Akron          Zips          AKR          Mid-American      &lt;NA&gt;     #00285e
 3 Alabama        Crimson Tide  ALA          SEC               &lt;NA&gt;     #9e1632
 4 App State      Mountaineers  APP          Sun Belt          East     #ffcc00
 5 Arizona        Wildcats      ARIZ         Big 12            &lt;NA&gt;     #0c234b
 6 Arizona State  Sun Devils    ASU          Big 12            &lt;NA&gt;     #8e0c3a
 7 Arkansas       Razorbacks    ARK          SEC               &lt;NA&gt;     #a41f35
 8 Arkansas State Red Wolves    ARST         Sun Belt          West     #e81018
 9 Army           Black Knights ARMY         American Athletic &lt;NA&gt;     #ce9c00
10 Auburn         Tigers        AUB          SEC               &lt;NA&gt;     #002b5c
   `Alt Color` `Logos[0]`                                        
   &lt;chr&gt;       &lt;chr&gt;                                             
 1 #ffffff     http://a.espncdn.com/i/teamlogos/ncaa/500/2005.png
 2 #84754e     http://a.espncdn.com/i/teamlogos/ncaa/500/2006.png
 3 #ffffff     http://a.espncdn.com/i/teamlogos/ncaa/500/333.png 
 4 #222222     http://a.espncdn.com/i/teamlogos/ncaa/500/2026.png
 5 #ab0520     http://a.espncdn.com/i/teamlogos/ncaa/500/12.png  
 6 #ffc72c     http://a.espncdn.com/i/teamlogos/ncaa/500/9.png   
 7 #ffffff     http://a.espncdn.com/i/teamlogos/ncaa/500/8.png   
 8 #000000     http://a.espncdn.com/i/teamlogos/ncaa/500/2032.png
 9 #231f20     http://a.espncdn.com/i/teamlogos/ncaa/500/349.png 
10 #f26522     http://a.espncdn.com/i/teamlogos/ncaa/500/2.png   
   `Logos[1]`                                              Twitter         
   &lt;chr&gt;                                                   &lt;chr&gt;           
 1 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2005.png @AF_Football    
 2 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2006.png @ZipsFB         
 3 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/333.png  @AlabamaFTBL    
 4 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2026.png @AppState_FB    
 5 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/12.png   @ArizonaFBall   
 6 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/9.png    @ASUFootball    
 7 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/8.png    @RazorbackFB    
 8 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2032.png @AStateFB       
 9 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/349.png  @ArmyWP_Football
10 http://a.espncdn.com/i/teamlogos/ncaa/500-dark/2.png    @AuburnFootball 
   `Location Name`          `Location City`  `Location State` `Location Zip`
   &lt;chr&gt;                    &lt;chr&gt;            &lt;chr&gt;                     &lt;dbl&gt;
 1 Falcon Stadium           Colorado Springs CO                        80840
 2 InfoCision Stadium       Akron            OH                        44399
 3 Bryant-Denny Stadium     Tuscaloosa       AL                        35487
 4 Kidd Brewer Stadium      Boone            NC                        28608
 5 Arizona Stadium          Tucson           AZ                        85721
 6 Mountain America Stadium Tempe            AZ                        85287
 7 Razorback Stadium        Fayetteville     AR                        72702
 8 Centennial Bank Stadium  Jonesboro        AR                        72404
 9 Michie Stadium           West Point       NY                        10996
10 Jordan-Hare Stadium      Auburn           AL                        36849
   `Location Country Code` `Location Timezone` `Location Latitude`
   &lt;chr&gt;                   &lt;chr&gt;                             &lt;dbl&gt;
 1 US                      America/Denver                     39.0
 2 US                      America/New_York                   41.1
 3 US                      America/Chicago                    33.2
 4 US                      America/New_York                   36.2
 5 US                      America/Phoenix                    32.2
 6 US                      America/Phoenix                    33.4
 7 US                      America/Chicago                    36.1
 8 US                      America/Chicago                    35.8
 9 US                      America/New_York                   41.4
10 US                      America/Chicago                    32.6
   `Location Longitude` `Location Elevation` `Location Capacity`
                  &lt;dbl&gt;                &lt;dbl&gt;               &lt;dbl&gt;
 1               -105.                2025.                46692
 2                -81.5                321.                30000
 3                -87.6                 70.1              101821
 4                -81.7                991.                30000
 5               -111.                 742.                50782
 6               -112.                 360.                65870
 7                -94.2                404.                80000
 8                -90.7                 89.5               30382
 9                -74.0                 99.2               38000
10                -85.5                201.                87451
   `Location Year Constructed` `Location Grass` `Location Dome`
                         &lt;dbl&gt; &lt;lgl&gt;            &lt;lgl&gt;          
 1                        1962 FALSE            FALSE          
 2                        2009 FALSE            FALSE          
 3                        1929 TRUE             FALSE          
 4                        1962 FALSE            FALSE          
 5                        1928 FALSE            FALSE          
 6                        1958 TRUE             FALSE          
 7                        1938 FALSE            FALSE          
 8                        1974 FALSE            FALSE          
 9                        1924 FALSE            FALSE          
10                        1939 TRUE             FALSE          
# ℹ 124 more rows</code></pre>
</div>
</div>
<p>The last couple steps have made the table much more concise, but there are still more columns which can be removed. As can be seen, the logo columns include links to logos for each school. While this information could be useful for some purposes, it takes up a ton of space and does not look good. Since this data is not really useful for our purposes, it is safe to just remove it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">select</span>(fbs, <span class="sc">-</span><span class="fu">c</span>(<span class="st">"Logos[0]"</span>, <span class="st">"Logos[1]"</span>))</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 21
   School         Mascot        Abbreviation Conference        Division Color  
   &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;  
 1 Air Force      Falcons       AFA          Mountain West     &lt;NA&gt;     #004a7b
 2 Akron          Zips          AKR          Mid-American      &lt;NA&gt;     #00285e
 3 Alabama        Crimson Tide  ALA          SEC               &lt;NA&gt;     #9e1632
 4 App State      Mountaineers  APP          Sun Belt          East     #ffcc00
 5 Arizona        Wildcats      ARIZ         Big 12            &lt;NA&gt;     #0c234b
 6 Arizona State  Sun Devils    ASU          Big 12            &lt;NA&gt;     #8e0c3a
 7 Arkansas       Razorbacks    ARK          SEC               &lt;NA&gt;     #a41f35
 8 Arkansas State Red Wolves    ARST         Sun Belt          West     #e81018
 9 Army           Black Knights ARMY         American Athletic &lt;NA&gt;     #ce9c00
10 Auburn         Tigers        AUB          SEC               &lt;NA&gt;     #002b5c
   `Alt Color` Twitter          `Location Name`          `Location City` 
   &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;                    &lt;chr&gt;           
 1 #ffffff     @AF_Football     Falcon Stadium           Colorado Springs
 2 #84754e     @ZipsFB          InfoCision Stadium       Akron           
 3 #ffffff     @AlabamaFTBL     Bryant-Denny Stadium     Tuscaloosa      
 4 #222222     @AppState_FB     Kidd Brewer Stadium      Boone           
 5 #ab0520     @ArizonaFBall    Arizona Stadium          Tucson          
 6 #ffc72c     @ASUFootball     Mountain America Stadium Tempe           
 7 #ffffff     @RazorbackFB     Razorback Stadium        Fayetteville    
 8 #000000     @AStateFB        Centennial Bank Stadium  Jonesboro       
 9 #231f20     @ArmyWP_Football Michie Stadium           West Point      
10 #f26522     @AuburnFootball  Jordan-Hare Stadium      Auburn          
   `Location State` `Location Zip` `Location Country Code` `Location Timezone`
   &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;                   &lt;chr&gt;              
 1 CO                        80840 US                      America/Denver     
 2 OH                        44399 US                      America/New_York   
 3 AL                        35487 US                      America/Chicago    
 4 NC                        28608 US                      America/New_York   
 5 AZ                        85721 US                      America/Phoenix    
 6 AZ                        85287 US                      America/Phoenix    
 7 AR                        72702 US                      America/Chicago    
 8 AR                        72404 US                      America/Chicago    
 9 NY                        10996 US                      America/New_York   
10 AL                        36849 US                      America/Chicago    
   `Location Latitude` `Location Longitude` `Location Elevation`
                 &lt;dbl&gt;                &lt;dbl&gt;                &lt;dbl&gt;
 1                39.0               -105.                2025. 
 2                41.1                -81.5                321. 
 3                33.2                -87.6                 70.1
 4                36.2                -81.7                991. 
 5                32.2               -111.                 742. 
 6                33.4               -112.                 360. 
 7                36.1                -94.2                404. 
 8                35.8                -90.7                 89.5
 9                41.4                -74.0                 99.2
10                32.6                -85.5                201. 
   `Location Capacity` `Location Year Constructed` `Location Grass`
                 &lt;dbl&gt;                       &lt;dbl&gt; &lt;lgl&gt;           
 1               46692                        1962 FALSE           
 2               30000                        2009 FALSE           
 3              101821                        1929 TRUE            
 4               30000                        1962 FALSE           
 5               50782                        1928 FALSE           
 6               65870                        1958 TRUE            
 7               80000                        1938 FALSE           
 8               30382                        1974 FALSE           
 9               38000                        1924 FALSE           
10               87451                        1939 TRUE            
   `Location Dome`
   &lt;lgl&gt;          
 1 FALSE          
 2 FALSE          
 3 FALSE          
 4 FALSE          
 5 FALSE          
 6 FALSE          
 7 FALSE          
 8 FALSE          
 9 FALSE          
10 FALSE          
# ℹ 124 more rows</code></pre>
</div>
</div>
<p>Finally, there is one more column that can be removed. There is a country column that says what country every school is in. Since every FBS school is in the US, there is no need to have this column. Therefore, it can be safely removed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">select</span>(fbs, <span class="sc">-</span><span class="st">"Location Country Code"</span>)</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 20
   School         Mascot        Abbreviation Conference        Division Color  
   &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;  
 1 Air Force      Falcons       AFA          Mountain West     &lt;NA&gt;     #004a7b
 2 Akron          Zips          AKR          Mid-American      &lt;NA&gt;     #00285e
 3 Alabama        Crimson Tide  ALA          SEC               &lt;NA&gt;     #9e1632
 4 App State      Mountaineers  APP          Sun Belt          East     #ffcc00
 5 Arizona        Wildcats      ARIZ         Big 12            &lt;NA&gt;     #0c234b
 6 Arizona State  Sun Devils    ASU          Big 12            &lt;NA&gt;     #8e0c3a
 7 Arkansas       Razorbacks    ARK          SEC               &lt;NA&gt;     #a41f35
 8 Arkansas State Red Wolves    ARST         Sun Belt          West     #e81018
 9 Army           Black Knights ARMY         American Athletic &lt;NA&gt;     #ce9c00
10 Auburn         Tigers        AUB          SEC               &lt;NA&gt;     #002b5c
   `Alt Color` Twitter          `Location Name`          `Location City` 
   &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;                    &lt;chr&gt;           
 1 #ffffff     @AF_Football     Falcon Stadium           Colorado Springs
 2 #84754e     @ZipsFB          InfoCision Stadium       Akron           
 3 #ffffff     @AlabamaFTBL     Bryant-Denny Stadium     Tuscaloosa      
 4 #222222     @AppState_FB     Kidd Brewer Stadium      Boone           
 5 #ab0520     @ArizonaFBall    Arizona Stadium          Tucson          
 6 #ffc72c     @ASUFootball     Mountain America Stadium Tempe           
 7 #ffffff     @RazorbackFB     Razorback Stadium        Fayetteville    
 8 #000000     @AStateFB        Centennial Bank Stadium  Jonesboro       
 9 #231f20     @ArmyWP_Football Michie Stadium           West Point      
10 #f26522     @AuburnFootball  Jordan-Hare Stadium      Auburn          
   `Location State` `Location Zip` `Location Timezone` `Location Latitude`
   &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;                             &lt;dbl&gt;
 1 CO                        80840 America/Denver                     39.0
 2 OH                        44399 America/New_York                   41.1
 3 AL                        35487 America/Chicago                    33.2
 4 NC                        28608 America/New_York                   36.2
 5 AZ                        85721 America/Phoenix                    32.2
 6 AZ                        85287 America/Phoenix                    33.4
 7 AR                        72702 America/Chicago                    36.1
 8 AR                        72404 America/Chicago                    35.8
 9 NY                        10996 America/New_York                   41.4
10 AL                        36849 America/Chicago                    32.6
   `Location Longitude` `Location Elevation` `Location Capacity`
                  &lt;dbl&gt;                &lt;dbl&gt;               &lt;dbl&gt;
 1               -105.                2025.                46692
 2                -81.5                321.                30000
 3                -87.6                 70.1              101821
 4                -81.7                991.                30000
 5               -111.                 742.                50782
 6               -112.                 360.                65870
 7                -94.2                404.                80000
 8                -90.7                 89.5               30382
 9                -74.0                 99.2               38000
10                -85.5                201.                87451
   `Location Year Constructed` `Location Grass` `Location Dome`
                         &lt;dbl&gt; &lt;lgl&gt;            &lt;lgl&gt;          
 1                        1962 FALSE            FALSE          
 2                        2009 FALSE            FALSE          
 3                        1929 TRUE             FALSE          
 4                        1962 FALSE            FALSE          
 5                        1928 FALSE            FALSE          
 6                        1958 TRUE             FALSE          
 7                        1938 FALSE            FALSE          
 8                        1974 FALSE            FALSE          
 9                        1924 FALSE            FALSE          
10                        1939 TRUE             FALSE          
# ℹ 124 more rows</code></pre>
</div>
</div>
<p>These are all the columns that can be completely removed. However, there is one more column that could be removed if we move its data elsewhere. As can be seen, the division column is empty for most schools. This is because the Sun Belt is the only conference that still has divisions. There is no need to have this column if it is mostly empty, but the data that is there is still important. Therefore, the best thing to do is to add the data from that column into the conference column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">unite</span>(fbs, <span class="st">"Conference"</span>, Conference, Division, <span class="at">sep =</span> <span class="st">" "</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(fbs, Conference <span class="sc">==</span> <span class="st">"Sun Belt East"</span> <span class="sc">|</span> Conference <span class="sc">==</span> <span class="st">"Sun Belt West"</span>) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">14</span>, <span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 19
   School           Mascot          Abbreviation Conference    Color  
   &lt;chr&gt;            &lt;chr&gt;           &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;  
 1 App State        Mountaineers    APP          Sun Belt East #ffcc00
 2 Arkansas State   Red Wolves      ARST         Sun Belt West #e81018
 3 Coastal Carolina Chanticleers    CCU          Sun Belt East #007073
 4 Georgia Southern Eagles          GASO         Sun Belt East #003775
 5 Georgia State    Panthers        GAST         Sun Belt East #1e539a
 6 James Madison    Dukes           JMU          Sun Belt East #450084
 7 Louisiana        Ragin' Cajuns   UL           Sun Belt West #ce181e
 8 Marshall         Thundering Herd MRSH         Sun Belt East #00ae42
 9 Old Dominion     Monarchs        ODU          Sun Belt East #00507d
10 South Alabama    Jaguars         USA          Sun Belt West #00205B
11 Southern Miss    Golden Eagles   USM          Sun Belt West #FFAA3C
12 Texas State      Bobcats         TXST         Sun Belt West #4e1719
13 Troy             Trojans         TROY         Sun Belt West #AE0210
14 UL Monroe        Warhawks        ULM          Sun Belt West #231F20
   `Alt Color` Twitter          `Location Name`                `Location City`
   &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;                          &lt;chr&gt;          
 1 #222222     @AppState_FB     Kidd Brewer Stadium            Boone          
 2 #000000     @AStateFB        Centennial Bank Stadium        Jonesboro      
 3 #876447     @CoastalFootball Brooks Stadium (SC)            Conway         
 4 #f0f0f0     @GSAthletics_FB  Allen E. Paulson Stadium       Statesboro     
 5 #ebebeb     @GeorgiaStateFB  Center Parc Stadium            Atlanta        
 6 #b5a068     @JMUFootball     Bridgeforth Stadium            Harrisonburg   
 7 #ffffff     @RaginCajunsFB   Cajun Field                    Lafayette      
 8 #be854c     @HerdFB          Joan C. Edwards Stadium        Huntington     
 9 #a1d2f1     @ODUFootball     S.B. Ballard Stadium           Norfolk        
10 #BF0D3E     @SouthAlabamaFB  Hancock Whitney Stadium        Mobile         
11 #ffc423     @SouthernMissFB  M. M. Roberts Stadium          Hattiesburg    
12 #b4975a     @TXStateFootball Bobcat Stadium (TX)            San Marcos     
13 #88898c     @TroyTrojansFB   Veterans Memorial Stadium (AL) Troy           
14 #b18445     @ULM_FB          Malone Stadium                 Monroe         
   `Location State` `Location Zip` `Location Timezone` `Location Latitude`
   &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;                             &lt;dbl&gt;
 1 NC                        28608 America/New_York                   36.2
 2 AR                        72404 America/Chicago                    35.8
 3 SC                        29528 America/New_York                   33.8
 4 GA                        30460 America/New_York                   32.4
 5 GA                        30315 America/New_York                   33.7
 6 VA                        22807 America/New_York                   38.4
 7 LA                        70506 America/Chicago                    30.2
 8 WV                        25755 America/New_York                   38.4
 9 VA                        23551 America/New_York                   36.9
10 AL                        85329 &lt;NA&gt;                               30.7
11 MS                        39402 America/Chicago                    31.3
12 TX                        78666 America/Chicago                    29.9
13 AL                        36082 America/Chicago                    31.8
14 LA                        71209 America/Chicago                    32.5
   `Location Longitude` `Location Elevation` `Location Capacity`
                  &lt;dbl&gt;                &lt;dbl&gt;               &lt;dbl&gt;
 1                -81.7               991.                 30000
 2                -90.7                89.5                30382
 3                -79.0                13.7                21000
 4                -81.8                61.3                25000
 5                -84.4               287                  25000
 6                -78.9               399.                 24877
 7                -92.0                 3.56               41426
 8                -82.4               164.                 38016
 9                -76.3                 3.15               20118
10                -88.0                NA                  25450
11                -89.3                64.5                36000
12                -97.9               178.                 30000
13                -86.0               155.                 30000
14                -92.1                23.0                30427
   `Location Year Constructed` `Location Grass` `Location Dome`
                         &lt;dbl&gt; &lt;lgl&gt;            &lt;lgl&gt;          
 1                        1962 FALSE            FALSE          
 2                        1974 FALSE            FALSE          
 3                        2003 FALSE            FALSE          
 4                        1984 FALSE            FALSE          
 5                        2017 FALSE            FALSE          
 6                        1975 FALSE            FALSE          
 7                        1971 FALSE            FALSE          
 8                        1991 FALSE            FALSE          
 9                        1936 FALSE            FALSE          
10                          NA FALSE            FALSE          
11                        1932 FALSE            FALSE          
12                        1981 FALSE            FALSE          
13                        1950 FALSE            FALSE          
14                        1978 FALSE            FALSE          </code></pre>
</div>
</div>
<p>As seen in the above table, all Sun Belt teams now have their division included in their conference. All of the unnecessary columns have now been removed. However, some of the remaining column names could be improved. First of all, “Location Name” is not a good description for the column which lists each school’s stadium. Therefore, it would be best to change the name of that column to “Stadium”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">rename</span>(fbs, <span class="st">"Stadium"</span> <span class="ot">=</span> <span class="st">"Location Name"</span>)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 19
   School         Mascot        Abbreviation Conference        Color  
   &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;  
 1 Air Force      Falcons       AFA          Mountain West     #004a7b
 2 Akron          Zips          AKR          Mid-American      #00285e
 3 Alabama        Crimson Tide  ALA          SEC               #9e1632
 4 App State      Mountaineers  APP          Sun Belt East     #ffcc00
 5 Arizona        Wildcats      ARIZ         Big 12            #0c234b
 6 Arizona State  Sun Devils    ASU          Big 12            #8e0c3a
 7 Arkansas       Razorbacks    ARK          SEC               #a41f35
 8 Arkansas State Red Wolves    ARST         Sun Belt West     #e81018
 9 Army           Black Knights ARMY         American Athletic #ce9c00
10 Auburn         Tigers        AUB          SEC               #002b5c
   `Alt Color` Twitter          Stadium                  `Location City` 
   &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;                    &lt;chr&gt;           
 1 #ffffff     @AF_Football     Falcon Stadium           Colorado Springs
 2 #84754e     @ZipsFB          InfoCision Stadium       Akron           
 3 #ffffff     @AlabamaFTBL     Bryant-Denny Stadium     Tuscaloosa      
 4 #222222     @AppState_FB     Kidd Brewer Stadium      Boone           
 5 #ab0520     @ArizonaFBall    Arizona Stadium          Tucson          
 6 #ffc72c     @ASUFootball     Mountain America Stadium Tempe           
 7 #ffffff     @RazorbackFB     Razorback Stadium        Fayetteville    
 8 #000000     @AStateFB        Centennial Bank Stadium  Jonesboro       
 9 #231f20     @ArmyWP_Football Michie Stadium           West Point      
10 #f26522     @AuburnFootball  Jordan-Hare Stadium      Auburn          
   `Location State` `Location Zip` `Location Timezone` `Location Latitude`
   &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;                             &lt;dbl&gt;
 1 CO                        80840 America/Denver                     39.0
 2 OH                        44399 America/New_York                   41.1
 3 AL                        35487 America/Chicago                    33.2
 4 NC                        28608 America/New_York                   36.2
 5 AZ                        85721 America/Phoenix                    32.2
 6 AZ                        85287 America/Phoenix                    33.4
 7 AR                        72702 America/Chicago                    36.1
 8 AR                        72404 America/Chicago                    35.8
 9 NY                        10996 America/New_York                   41.4
10 AL                        36849 America/Chicago                    32.6
   `Location Longitude` `Location Elevation` `Location Capacity`
                  &lt;dbl&gt;                &lt;dbl&gt;               &lt;dbl&gt;
 1               -105.                2025.                46692
 2                -81.5                321.                30000
 3                -87.6                 70.1              101821
 4                -81.7                991.                30000
 5               -111.                 742.                50782
 6               -112.                 360.                65870
 7                -94.2                404.                80000
 8                -90.7                 89.5               30382
 9                -74.0                 99.2               38000
10                -85.5                201.                87451
   `Location Year Constructed` `Location Grass` `Location Dome`
                         &lt;dbl&gt; &lt;lgl&gt;            &lt;lgl&gt;          
 1                        1962 FALSE            FALSE          
 2                        2009 FALSE            FALSE          
 3                        1929 TRUE             FALSE          
 4                        1962 FALSE            FALSE          
 5                        1928 FALSE            FALSE          
 6                        1958 TRUE             FALSE          
 7                        1938 FALSE            FALSE          
 8                        1974 FALSE            FALSE          
 9                        1924 FALSE            FALSE          
10                        1939 TRUE             FALSE          
# ℹ 124 more rows</code></pre>
</div>
</div>
<p>Besides that column, every column after that also includes “Location” at the beginning of its name. Since there is no longer a “Location Name” column, that word does not really fit in the rest of the columns. Those columns do not need that word to describe what they are referring to anyway. Therefore, it would be best to remove that word from those columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">rename_with</span>(fbs, <span class="sc">~</span><span class="fu">str_remove</span>(., <span class="st">"Location "</span>))</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 19
   School         Mascot        Abbreviation Conference        Color  
   &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;  
 1 Air Force      Falcons       AFA          Mountain West     #004a7b
 2 Akron          Zips          AKR          Mid-American      #00285e
 3 Alabama        Crimson Tide  ALA          SEC               #9e1632
 4 App State      Mountaineers  APP          Sun Belt East     #ffcc00
 5 Arizona        Wildcats      ARIZ         Big 12            #0c234b
 6 Arizona State  Sun Devils    ASU          Big 12            #8e0c3a
 7 Arkansas       Razorbacks    ARK          SEC               #a41f35
 8 Arkansas State Red Wolves    ARST         Sun Belt West     #e81018
 9 Army           Black Knights ARMY         American Athletic #ce9c00
10 Auburn         Tigers        AUB          SEC               #002b5c
   `Alt Color` Twitter          Stadium                  City             State
   &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;                    &lt;chr&gt;            &lt;chr&gt;
 1 #ffffff     @AF_Football     Falcon Stadium           Colorado Springs CO   
 2 #84754e     @ZipsFB          InfoCision Stadium       Akron            OH   
 3 #ffffff     @AlabamaFTBL     Bryant-Denny Stadium     Tuscaloosa       AL   
 4 #222222     @AppState_FB     Kidd Brewer Stadium      Boone            NC   
 5 #ab0520     @ArizonaFBall    Arizona Stadium          Tucson           AZ   
 6 #ffc72c     @ASUFootball     Mountain America Stadium Tempe            AZ   
 7 #ffffff     @RazorbackFB     Razorback Stadium        Fayetteville     AR   
 8 #000000     @AStateFB        Centennial Bank Stadium  Jonesboro        AR   
 9 #231f20     @ArmyWP_Football Michie Stadium           West Point       NY   
10 #f26522     @AuburnFootball  Jordan-Hare Stadium      Auburn           AL   
     Zip Timezone         Latitude Longitude Elevation Capacity
   &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 80840 America/Denver       39.0    -105.     2025.     46692
 2 44399 America/New_York     41.1     -81.5     321.     30000
 3 35487 America/Chicago      33.2     -87.6      70.1   101821
 4 28608 America/New_York     36.2     -81.7     991.     30000
 5 85721 America/Phoenix      32.2    -111.      742.     50782
 6 85287 America/Phoenix      33.4    -112.      360.     65870
 7 72702 America/Chicago      36.1     -94.2     404.     80000
 8 72404 America/Chicago      35.8     -90.7      89.5    30382
 9 10996 America/New_York     41.4     -74.0      99.2    38000
10 36849 America/Chicago      32.6     -85.5     201.     87451
   `Year Constructed` Grass Dome 
                &lt;dbl&gt; &lt;lgl&gt; &lt;lgl&gt;
 1               1962 FALSE FALSE
 2               2009 FALSE FALSE
 3               1929 TRUE  FALSE
 4               1962 FALSE FALSE
 5               1928 FALSE FALSE
 6               1958 TRUE  FALSE
 7               1938 FALSE FALSE
 8               1974 FALSE FALSE
 9               1924 FALSE FALSE
10               1939 TRUE  FALSE
# ℹ 124 more rows</code></pre>
</div>
</div>
<p>Once this word is removed, there are still two column names left with multiple words and, by extension, quotation marks. The data would look much nicer without those quotation marks, so it would be best to turn those column names into one word. The first column name that needs to be changed is “Alt Color”. The best way to change it to one word while still distinguishing it from the “Color” column is to change “Color” to “Color1” and change “Alt Color” to “Color2”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">rename</span>(fbs, <span class="st">"Color1"</span> <span class="ot">=</span> <span class="st">"Color"</span>)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">rename</span>(fbs, <span class="st">"Color2"</span> <span class="ot">=</span> <span class="st">"Alt Color"</span>)</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 19
   School         Mascot        Abbreviation Conference        Color1  Color2 
   &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;  
 1 Air Force      Falcons       AFA          Mountain West     #004a7b #ffffff
 2 Akron          Zips          AKR          Mid-American      #00285e #84754e
 3 Alabama        Crimson Tide  ALA          SEC               #9e1632 #ffffff
 4 App State      Mountaineers  APP          Sun Belt East     #ffcc00 #222222
 5 Arizona        Wildcats      ARIZ         Big 12            #0c234b #ab0520
 6 Arizona State  Sun Devils    ASU          Big 12            #8e0c3a #ffc72c
 7 Arkansas       Razorbacks    ARK          SEC               #a41f35 #ffffff
 8 Arkansas State Red Wolves    ARST         Sun Belt West     #e81018 #000000
 9 Army           Black Knights ARMY         American Athletic #ce9c00 #231f20
10 Auburn         Tigers        AUB          SEC               #002b5c #f26522
   Twitter          Stadium                  City             State   Zip
   &lt;chr&gt;            &lt;chr&gt;                    &lt;chr&gt;            &lt;chr&gt; &lt;dbl&gt;
 1 @AF_Football     Falcon Stadium           Colorado Springs CO    80840
 2 @ZipsFB          InfoCision Stadium       Akron            OH    44399
 3 @AlabamaFTBL     Bryant-Denny Stadium     Tuscaloosa       AL    35487
 4 @AppState_FB     Kidd Brewer Stadium      Boone            NC    28608
 5 @ArizonaFBall    Arizona Stadium          Tucson           AZ    85721
 6 @ASUFootball     Mountain America Stadium Tempe            AZ    85287
 7 @RazorbackFB     Razorback Stadium        Fayetteville     AR    72702
 8 @AStateFB        Centennial Bank Stadium  Jonesboro        AR    72404
 9 @ArmyWP_Football Michie Stadium           West Point       NY    10996
10 @AuburnFootball  Jordan-Hare Stadium      Auburn           AL    36849
   Timezone         Latitude Longitude Elevation Capacity `Year Constructed`
   &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;              &lt;dbl&gt;
 1 America/Denver       39.0    -105.     2025.     46692               1962
 2 America/New_York     41.1     -81.5     321.     30000               2009
 3 America/Chicago      33.2     -87.6      70.1   101821               1929
 4 America/New_York     36.2     -81.7     991.     30000               1962
 5 America/Phoenix      32.2    -111.      742.     50782               1928
 6 America/Phoenix      33.4    -112.      360.     65870               1958
 7 America/Chicago      36.1     -94.2     404.     80000               1938
 8 America/Chicago      35.8     -90.7      89.5    30382               1974
 9 America/New_York     41.4     -74.0      99.2    38000               1924
10 America/Chicago      32.6     -85.5     201.     87451               1939
   Grass Dome 
   &lt;lgl&gt; &lt;lgl&gt;
 1 FALSE FALSE
 2 FALSE FALSE
 3 TRUE  FALSE
 4 FALSE FALSE
 5 FALSE FALSE
 6 TRUE  FALSE
 7 FALSE FALSE
 8 FALSE FALSE
 9 FALSE FALSE
10 TRUE  FALSE
# ℹ 124 more rows</code></pre>
</div>
</div>
<p>The other column name that needs to be changes is “Year Constructed”. While changing the name to one word, it would be best to indicate that this is the year each stadium opened, not when construction on it started. The best way to solve both of these problems would be to rename the “Year Constructed” column to “Opening”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">rename</span>(fbs, <span class="st">"Opening"</span> <span class="ot">=</span> <span class="st">"Year Constructed"</span>)</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 19
   School         Mascot        Abbreviation Conference        Color1  Color2 
   &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;  
 1 Air Force      Falcons       AFA          Mountain West     #004a7b #ffffff
 2 Akron          Zips          AKR          Mid-American      #00285e #84754e
 3 Alabama        Crimson Tide  ALA          SEC               #9e1632 #ffffff
 4 App State      Mountaineers  APP          Sun Belt East     #ffcc00 #222222
 5 Arizona        Wildcats      ARIZ         Big 12            #0c234b #ab0520
 6 Arizona State  Sun Devils    ASU          Big 12            #8e0c3a #ffc72c
 7 Arkansas       Razorbacks    ARK          SEC               #a41f35 #ffffff
 8 Arkansas State Red Wolves    ARST         Sun Belt West     #e81018 #000000
 9 Army           Black Knights ARMY         American Athletic #ce9c00 #231f20
10 Auburn         Tigers        AUB          SEC               #002b5c #f26522
   Twitter          Stadium                  City             State   Zip
   &lt;chr&gt;            &lt;chr&gt;                    &lt;chr&gt;            &lt;chr&gt; &lt;dbl&gt;
 1 @AF_Football     Falcon Stadium           Colorado Springs CO    80840
 2 @ZipsFB          InfoCision Stadium       Akron            OH    44399
 3 @AlabamaFTBL     Bryant-Denny Stadium     Tuscaloosa       AL    35487
 4 @AppState_FB     Kidd Brewer Stadium      Boone            NC    28608
 5 @ArizonaFBall    Arizona Stadium          Tucson           AZ    85721
 6 @ASUFootball     Mountain America Stadium Tempe            AZ    85287
 7 @RazorbackFB     Razorback Stadium        Fayetteville     AR    72702
 8 @AStateFB        Centennial Bank Stadium  Jonesboro        AR    72404
 9 @ArmyWP_Football Michie Stadium           West Point       NY    10996
10 @AuburnFootball  Jordan-Hare Stadium      Auburn           AL    36849
   Timezone         Latitude Longitude Elevation Capacity Opening Grass Dome 
   &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt; &lt;lgl&gt;
 1 America/Denver       39.0    -105.     2025.     46692    1962 FALSE FALSE
 2 America/New_York     41.1     -81.5     321.     30000    2009 FALSE FALSE
 3 America/Chicago      33.2     -87.6      70.1   101821    1929 TRUE  FALSE
 4 America/New_York     36.2     -81.7     991.     30000    1962 FALSE FALSE
 5 America/Phoenix      32.2    -111.      742.     50782    1928 FALSE FALSE
 6 America/Phoenix      33.4    -112.      360.     65870    1958 TRUE  FALSE
 7 America/Chicago      36.1     -94.2     404.     80000    1938 FALSE FALSE
 8 America/Chicago      35.8     -90.7      89.5    30382    1974 FALSE FALSE
 9 America/New_York     41.4     -74.0      99.2    38000    1924 FALSE FALSE
10 America/Chicago      32.6     -85.5     201.     87451    1939 TRUE  FALSE
# ℹ 124 more rows</code></pre>
</div>
</div>
<p>After this, the columns are now cleaned up how we want them. Now that the columns have been dealt with, it is time to make sure the cell values are in order. First of all, we need to handle any null values. Therefore, we need to get a list of all values of NA in the data, so we can fix them accordingly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(fbs, <span class="fu">if_any</span>(<span class="fu">everything</span>(), is.na)) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 19
  School         Mascot           Abbreviation Conference        Color1  Color2 
  &lt;chr&gt;          &lt;chr&gt;            &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;  
1 Hawai'i        Rainbow Warriors HAW          Mountain West     #003420 #ffffff
2 Kennesaw State Owls             KENN         Conference USA    #fdbb30 #000000
3 Rutgers        Scarlet Knights  RUTG         Big Ten           #d21034 #ffffff
4 South Alabama  Jaguars          USA          Sun Belt West     #00205B #BF0D3E
5 UAB            Blazers          UAB          American Athletic #003b28 #ffc845
6 UNLV           Rebels           UNLV         Mountain West     #b10202 #ffffff
7 UTSA           Roadrunners      UTSA         American Athletic #002A5C #f47321
  Twitter         Stadium                               City        State   Zip
  &lt;chr&gt;           &lt;chr&gt;                                 &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt;
1 @HawaiiFootball Clarence T.C. Ching Athletics Complex Honolulu    HI    96822
2 @KennesawStFB   Fifth Third Stadium                   Kennesaw    GA    48187
3 @Rfootball      SHI Stadium                           Piscataway  NJ     8854
4 @SouthAlabamaFB Hancock Whitney Stadium               Mobile      AL    85329
5 @UAB_FB         Protective Stadium                    Birmingham  AL    35203
6 @UNLVFootball   Allegiant Stadium                     Las Vegas   NV    89154
7 &lt;NA&gt;            Alamodome                             San Antonio TX    78299
  Timezone        Latitude Longitude Elevation Capacity Opening Grass Dome 
  &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt; &lt;lgl&gt;
1 &lt;NA&gt;                21.3    -158.        20      9000      NA TRUE  FALSE
2 &lt;NA&gt;                34.0     -84.6      297.     8318    2010 NA    FALSE
3 &lt;NA&gt;                40.5     -74.5       NA     52454      NA FALSE FALSE
4 &lt;NA&gt;                30.7     -88.0       NA     25450      NA FALSE FALSE
5 &lt;NA&gt;                33.5     -86.8       NA         0      NA FALSE FALSE
6 &lt;NA&gt;                36.2    -115.        NA     65000      NA FALSE TRUE 
7 America/Chicago     29.4     -98.5      202.    36582    1993 FALSE TRUE </code></pre>
</div>
</div>
<p>As can be seen, there are seven schools who have cell values listed as NA. Affected columns include the timezone, elevation, construction, and grass columns. Since I want this data set to have all relevant information, I will use my own research to fill out each of these cells as accurately as possible.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Twitter =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"UTSA"</span>, <span class="st">"@UTSAFTBL"</span>, Twitter))</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Timezone =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"Hawai'i"</span>, <span class="st">"Pacific/Honolulu"</span>, Timezone))</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Timezone =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"Kennesaw State"</span> <span class="sc">|</span> School <span class="sc">==</span> <span class="st">"Rutgers"</span>, <span class="st">"America/New_York"</span>, Timezone))</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Timezone =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"South Alabama"</span> <span class="sc">|</span> School <span class="sc">==</span> <span class="st">"UAB"</span>, <span class="st">"America/Chicago"</span>, Timezone))</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Timezone =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"UNLV"</span>, <span class="st">"America/Los_Angeles"</span>, Timezone))</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Elevation =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"Rutgers"</span>, <span class="dv">50</span>, Elevation))</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Elevation =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"South Alabama"</span>, <span class="dv">33</span>, Elevation))</span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Elevation =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"UAB"</span>, <span class="dv">597</span>, Elevation))</span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Elevation =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"UNLV"</span>, <span class="dv">2190</span>, Elevation))</span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Opening =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"Hawai'i"</span>, <span class="dv">2015</span>, Opening))</span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Opening =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"Rutgers"</span>, <span class="dv">1994</span>, Opening))</span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Opening =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"South Alabama"</span>, <span class="dv">2020</span>, Opening))</span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Opening =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"UAB"</span>, <span class="dv">2021</span>, Opening))</span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Opening =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"UNLV"</span>, <span class="dv">2020</span>, Opening))</span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Grass =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"Kennesaw State"</span>, <span class="cn">FALSE</span>, Grass))</span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(fbs, <span class="fu">if_any</span>(<span class="fu">everything</span>(), is.na)) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 19
# ℹ 19 variables: School &lt;chr&gt;, Mascot &lt;chr&gt;, Abbreviation &lt;chr&gt;, Conference &lt;chr&gt;, Color1 &lt;chr&gt;, Color2 &lt;chr&gt;, Twitter &lt;chr&gt;, Stadium &lt;chr&gt;, City &lt;chr&gt;, State &lt;chr&gt;, Zip &lt;dbl&gt;, Timezone &lt;chr&gt;, Latitude &lt;dbl&gt;, Longitude &lt;dbl&gt;, Elevation &lt;dbl&gt;, Capacity &lt;dbl&gt;, Opening &lt;dbl&gt;, Grass &lt;lgl&gt;, Dome &lt;lgl&gt;</code></pre>
</div>
</div>
<p>As seen from the empty tibble, all cells with values of NA have been updated to the most accurate data that could be found. However, there is still one more problem. In the earlier table, UAB’s Protective Stadium had a listed capacity of 0. This is clearly not accurate and must be fixed. First of all, we must check to see if any other schools have this problem.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(fbs, Capacity <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 19
  School Mascot  Abbreviation Conference        Color1  Color2  Twitter
  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
1 UAB    Blazers UAB          American Athletic #003b28 #ffc845 @UAB_FB
  Stadium            City       State   Zip Timezone        Latitude Longitude
  &lt;chr&gt;              &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;
1 Protective Stadium Birmingham AL    35203 America/Chicago     33.5     -86.8
  Elevation Capacity Opening Grass Dome 
      &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt; &lt;lgl&gt;
1       597        0    2021 FALSE FALSE</code></pre>
</div>
</div>
<p>Thankfully, no other schools have this problem, so this will be a pretty simple fix. Protective Stadium has a capacity of 47,100, so we will simply add that value to that cell.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="ot">&lt;-</span> <span class="fu">mutate</span>(fbs, <span class="at">Capacity =</span> <span class="fu">ifelse</span>(School <span class="sc">==</span> <span class="st">"UAB"</span>, <span class="dv">47100</span>, Capacity))</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(fbs, Capacity <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 19
# ℹ 19 variables: School &lt;chr&gt;, Mascot &lt;chr&gt;, Abbreviation &lt;chr&gt;, Conference &lt;chr&gt;, Color1 &lt;chr&gt;, Color2 &lt;chr&gt;, Twitter &lt;chr&gt;, Stadium &lt;chr&gt;, City &lt;chr&gt;, State &lt;chr&gt;, Zip &lt;dbl&gt;, Timezone &lt;chr&gt;, Latitude &lt;dbl&gt;, Longitude &lt;dbl&gt;, Elevation &lt;dbl&gt;, Capacity &lt;dbl&gt;, Opening &lt;dbl&gt;, Grass &lt;lgl&gt;, Dome &lt;lgl&gt;</code></pre>
</div>
</div>
<p>As seen from the empty table, this problem has been fixed. With that last fix, this data set is now tidy. Below we can get a look at this tidy data set before writing it into a new csv file. We can also use this data to map every FBS school. This is just the beginning of this data set’s usefulness, and it would be interesting to do more with it in the future.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 19
   School         Mascot        Abbreviation Conference        Color1  Color2 
   &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;  
 1 Air Force      Falcons       AFA          Mountain West     #004a7b #ffffff
 2 Akron          Zips          AKR          Mid-American      #00285e #84754e
 3 Alabama        Crimson Tide  ALA          SEC               #9e1632 #ffffff
 4 App State      Mountaineers  APP          Sun Belt East     #ffcc00 #222222
 5 Arizona        Wildcats      ARIZ         Big 12            #0c234b #ab0520
 6 Arizona State  Sun Devils    ASU          Big 12            #8e0c3a #ffc72c
 7 Arkansas       Razorbacks    ARK          SEC               #a41f35 #ffffff
 8 Arkansas State Red Wolves    ARST         Sun Belt West     #e81018 #000000
 9 Army           Black Knights ARMY         American Athletic #ce9c00 #231f20
10 Auburn         Tigers        AUB          SEC               #002b5c #f26522
   Twitter          Stadium                  City             State   Zip
   &lt;chr&gt;            &lt;chr&gt;                    &lt;chr&gt;            &lt;chr&gt; &lt;dbl&gt;
 1 @AF_Football     Falcon Stadium           Colorado Springs CO    80840
 2 @ZipsFB          InfoCision Stadium       Akron            OH    44399
 3 @AlabamaFTBL     Bryant-Denny Stadium     Tuscaloosa       AL    35487
 4 @AppState_FB     Kidd Brewer Stadium      Boone            NC    28608
 5 @ArizonaFBall    Arizona Stadium          Tucson           AZ    85721
 6 @ASUFootball     Mountain America Stadium Tempe            AZ    85287
 7 @RazorbackFB     Razorback Stadium        Fayetteville     AR    72702
 8 @AStateFB        Centennial Bank Stadium  Jonesboro        AR    72404
 9 @ArmyWP_Football Michie Stadium           West Point       NY    10996
10 @AuburnFootball  Jordan-Hare Stadium      Auburn           AL    36849
   Timezone         Latitude Longitude Elevation Capacity Opening Grass Dome 
   &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;lgl&gt; &lt;lgl&gt;
 1 America/Denver       39.0    -105.     2025.     46692    1962 FALSE FALSE
 2 America/New_York     41.1     -81.5     321.     30000    2009 FALSE FALSE
 3 America/Chicago      33.2     -87.6      70.1   101821    1929 TRUE  FALSE
 4 America/New_York     36.2     -81.7     991.     30000    1962 FALSE FALSE
 5 America/Phoenix      32.2    -111.      742.     50782    1928 FALSE FALSE
 6 America/Phoenix      33.4    -112.      360.     65870    1958 TRUE  FALSE
 7 America/Chicago      36.1     -94.2     404.     80000    1938 FALSE FALSE
 8 America/Chicago      35.8     -90.7      89.5    30382    1974 FALSE FALSE
 9 America/New_York     41.4     -74.0      99.2    38000    1924 FALSE FALSE
10 America/Chicago      32.6     -85.5     201.     87451    1939 TRUE  FALSE
# ℹ 124 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>fbs <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(Longitude, Latitude, <span class="at">color =</span> Color1)) <span class="sc">+</span> <span class="fu">borders</span>(<span class="st">"state"</span>) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">coord_quickmap</span>() <span class="sc">+</span> <span class="fu">scale_color_identity</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ds4_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>source: https://collegefootballdata.com/exporter/teams/fbs?year=2024</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>